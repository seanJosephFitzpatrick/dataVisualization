<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
	
	<script src="http://d3js.org/d3.v3.min.js"></script>
	<script src="jquery-2.2.3.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>

    <title>Data visualization</title>
	
	    <style type="text/css">
        body {
            background-color: white;
        }
        
        svg {
		//center canvas
            padding: 0;
            margin: auto;
            display: block;
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
        }
    </style>
</head>

<body>
	<div id="canvas"></div>

    <h1 align="center">Population of Ireland by County and Gender CSO 2011</h1>
    <form>
       
          <legend>Male</legend>
          <p>
             <label>Select County</label>
             <select id = "countyListm" onchange="postRequest()">
			
			   
			   <option value = "Carlow">Carlow</option>
			   <option value = "Cavan">Cavan</option>
			   <option value = "Clare">Clare</option>
			   <option value = "Cork">Cork</option>
			   <option value = "Dublin">Dublin</option>
			   <option value = "Donegal">Donegal</option>
			   <option value = "Galway">Galway</option>
			   <option value = "Kerry">Kerry</option>
			   <option value = "Kildare">Kildare</option>
			   <option value = "Kilkenny">Kilkenny</option>
			   <option value = "Laois">Laois</option>
			   <option value = "Leitrim">Leitrim</option>
			   <option value = "Limerick">Limerick</option>
			   <option value = "Longford">Longford</option>
			   <option value = "Louth">Louth</option>
			   <option value = "Mayo">Mayo</option>
			   <option value = "Meath">Meath</option>
			   <option value = "Monaghan">Monaghan</option>
			   <option value = "North Tipperary">North Tipperary</option>
			   <option value = "Offaly">Offaly</option>		 
			   <option value = "Roscommon">Roscommon</option>
			   <option value = "Sligo">Sligo</option>
			   <option value = "South Tipperary">South Tipperary</option>
			   <option value = "Waterford">Waterford</option>
			   <option value = "Westmeath">Westmeath</option>
			   <option value = "Wexford">Wexford</option>
			   <option value = "Wicklow">Wicklow</option> 
             </select>
          </p>
       
    </form
	
	 <form>
       
          <legend>Female</legend>
          <p>
             <label>Select County</label>
             <select id = "countyListf" onchange="postRequest()">
			
			   
			   <option value = "Carlow">Carlow</option>
			   <option value = "Cavan">Cavan</option>
			   <option value = "Clare">Clare</option>
			   <option value = "Cork">Cork</option>
			   <option value = "Dublin">Dublin</option>
			   <option value = "Donegal">Donegal</option>
			   <option value = "Galway">Galway</option>
			   <option value = "Kerry">Kerry</option>
			   <option value = "Kildare">Kildare</option>
			   <option value = "Kilkenny">Kilkenny</option>
			   <option value = "Laois">Laois</option>
			   <option value = "Leitrim">Leitrim</option>
			   <option value = "Limerick">Limerick</option>
			   <option value = "Longford">Longford</option>
			   <option value = "Louth">Louth</option>
			   <option value = "Mayo">Mayo</option>
			   <option value = "Meath">Meath</option>
			   <option value = "Monaghan">Monaghan</option>
			   <option value = "North Tipperary">North Tipperary</option>
			   <option value = "Offaly">Offaly</option>		 
			   <option value = "Roscommon">Roscommon</option>
			   <option value = "Sligo">Sligo</option>
			   <option value = "South Tipperary">South Tipperary</option>
			   <option value = "Waterford">Waterford</option>
			   <option value = "Westmeath">Westmeath</option>
			   <option value = "Wexford">Wexford</option>
			   <option value = "Wicklow">Wicklow</option> 
             </select>
          </p>
       
    </form>
<button onclick="Pie()" >Pie</button>
<button onclick="Bar()" >Bar</button>


	<script type="text/javascript">
	
function postRequest() {
  
	var	a,
		b,
		d,
		g,
		x,
		y,
		arc,
		svg,
		//Store cypher query in variable query
		query,
		//Store drop down list value in variable val
		male = countyListm.value;
		female = countyListf.value;
	
	
	if (male === "Carlow") {
		
		d3.select("svg").remove();
		if(female === "Carlow"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Carlow Male'}), (m:County {County:'Carlow Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Cavan"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Carlow Male'}), (m:County {County:'Cavan Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Clare"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Carlow Male'}), (m:County {County:'Clare Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Cork"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Carlow Male'}), (m:County {County:'Cork Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Dublin"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Carlow Male'}), (m:County {County:'Dublin Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Donegal"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Carlow Male'}), (m:County {County:'Donegal Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Galway"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Carlow Male'}), (m:County {County:'Galway Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Kerry"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Carlow Male'}), (m:County {County:'Kerry Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Kildare"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Carlow Male'}), (m:County {County:'Kildare Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Kilkenny"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Carlow Male'}), (m:County {County:'Kilkenny Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Laois"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Carlow Male'}), (m:County {County:'Laois Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Leitrim"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Carlow Male'}), (m:County {County:'Leitrim Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Limerick"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Carlow Male'}), (m:County {County:'Limerick Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Longford"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Carlow Male'}), (m:County {County:'Longford Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Louth"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Carlow Male'}), (m:County {County:'Louth Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Mayo"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Carlow Male'}), (m:County {County:'Mayo Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Meath"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Carlow Male'}), (m:County {County:'Meath Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Monaghan"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Carlow Male'}), (m:County {County:'Monaghan Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Cork"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Carlow Male'}), (m:County {County:'Cork Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "North Tipperary"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Carlow Male'}), (m:County {County:'North Tipperary Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Offaly"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Carlow Male'}), (m:County {County:'Offaly Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Roscommon"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Carlow Male'}), (m:County {County:'Roscommon Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Sligo"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Carlow Male'}), (m:County {County:'Sligo Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Cork"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Carlow Male'}), (m:County {County:'Cork Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "South Tipperary"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Carlow Male'}), (m:County {County:'South Tipperary Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Waterford"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Carlow Male'}), (m:County {County:'Waterford Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Westmeath"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Carlow Male'}), (m:County {County:'Westmeath Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Wexford"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Carlow Male'}), (m:County {County:'Wexford Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Wicklow"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Carlow Male'}), (m:County {County:'Wicklow Female'})  RETURN (n.Population), (m.Population)"};				
		}
		
	} else if (male === "Cavan") {
	
		d3.select("svg").remove();
		if(female === "Carlow"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cavan Male'}), (m:County {County:'Carlow Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Cavan"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cavan Male'}), (m:County {County:'Cavan Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Clare"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cavan Male'}), (m:County {County:'Clare Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Cork"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cavan Male'}), (m:County {County:'Cork Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Dublin"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cavan Male'}), (m:County {County:'Dublin Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Donegal"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cavan Male'}), (m:County {County:'Donegal Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Galway"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cavan Male'}), (m:County {County:'Galway Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Kerry"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cavan Male'}), (m:County {County:'Kerry Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Kildare"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cavan Male'}), (m:County {County:'Kildare Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Kilkenny"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cavan Male'}), (m:County {County:'Kilkenny Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Laois"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cavan Male'}), (m:County {County:'Laois Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Leitrim"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cavan Male'}), (m:County {County:'Leitrim Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Limerick"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cavan Male'}), (m:County {County:'Limerick Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Longford"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cavan Male'}), (m:County {County:'Longford Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Louth"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cavan Male'}), (m:County {County:'Louth Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Mayo"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cavan Male'}), (m:County {County:'Mayo Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Meath"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cavan Male'}), (m:County {County:'Meath Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Monaghan"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cavan Male'}), (m:County {County:'Monaghan Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Cork"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cavan Male'}), (m:County {County:'Cork Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "North Tipperary"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cavan Male'}), (m:County {County:'North Tipperary Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Offaly"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cavan Male'}), (m:County {County:'Offaly Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Roscommon"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cavan Male'}), (m:County {County:'Roscommon Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Sligo"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cavan Male'}), (m:County {County:'Sligo Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Cork"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cavan Male'}), (m:County {County:'Cork Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "South Tipperary"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cavan Male'}), (m:County {County:'South Tipperary Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Waterford"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cavan Male'}), (m:County {County:'Waterford Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Westmeath"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cavan Male'}), (m:County {County:'Westmeath Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Wexford"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cavan Male'}), (m:County {County:'Wexford Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Wicklow"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cavan Male'}), (m:County {County:'Wicklow Female'})  RETURN (n.Population), (m.Population)"};				
		}
								
	}else if (male === "Clare") {
	
		d3.select("svg").remove();
		if(female === "Carlow"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Clare Male'}), (m:County {County:'Carlow Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Cavan"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Clare Male'}), (m:County {County:'Cavan Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Clare"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Clare Male'}), (m:County {County:'Clare Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Cork"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Clare Male'}), (m:County {County:'Cork Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Dublin"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Clare Male'}), (m:County {County:'Dublin Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Donegal"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Clare Male'}), (m:County {County:'Donegal Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Galway"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Clare Male'}), (m:County {County:'Galway Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Kerry"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Clare Male'}), (m:County {County:'Kerry Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Kildare"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Clare Male'}), (m:County {County:'Kildare Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Kilkenny"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Clare Male'}), (m:County {County:'Kilkenny Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Laois"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Clare Male'}), (m:County {County:'Laois Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Leitrim"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Clare Male'}), (m:County {County:'Leitrim Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Limerick"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Clare Male'}), (m:County {County:'Limerick Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Longford"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Clare Male'}), (m:County {County:'Longford Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Louth"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Clare Male'}), (m:County {County:'Louth Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Mayo"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Clare Male'}), (m:County {County:'Mayo Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Meath"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Clare Male'}), (m:County {County:'Meath Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Monaghan"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Clare Male'}), (m:County {County:'Monaghan Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Cork"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Clare Male'}), (m:County {County:'Cork Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "North Tipperary"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Clare Male'}), (m:County {County:'North Tipperary Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Offaly"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Clare Male'}), (m:County {County:'Offaly Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Roscommon"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Clare Male'}), (m:County {County:'Roscommon Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Sligo"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Clare Male'}), (m:County {County:'Sligo Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Cork"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Clare Male'}), (m:County {County:'Cork Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "South Tipperary"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Clare Male'}), (m:County {County:'South Tipperary Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Waterford"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Clare Male'}), (m:County {County:'Waterford Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Westmeath"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Clare Male'}), (m:County {County:'Westmeath Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Wexford"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Clare Male'}), (m:County {County:'Wexford Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Wicklow"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Clare Male'}), (m:County {County:'Wicklow Female'})  RETURN (n.Population), (m.Population)"};				
		}
								
	}else if (male === "Cork") {
	
		d3.select("svg").remove();
		if(female === "Carlow"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cork Male'}), (m:County {County:'Carlow Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Cavan"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cork Male'}), (m:County {County:'Cavan Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Clare"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cork Male'}), (m:County {County:'Clare Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Cork"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cork Male'}), (m:County {County:'Cork Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Dublin"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cork Male'}), (m:County {County:'Dublin Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Donegal"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cork Male'}), (m:County {County:'Donegal Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Galway"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cork Male'}), (m:County {County:'Galway Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Kerry"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cork Male'}), (m:County {County:'Kerry Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Kildare"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cork Male'}), (m:County {County:'Kildare Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Kilkenny"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cork Male'}), (m:County {County:'Kilkenny Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Laois"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cork Male'}), (m:County {County:'Laois Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Leitrim"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cork Male'}), (m:County {County:'Leitrim Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Limerick"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cork Male'}), (m:County {County:'Limerick Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Longford"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cork Male'}), (m:County {County:'Longford Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Louth"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cork Male'}), (m:County {County:'Louth Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Mayo"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cork Male'}), (m:County {County:'Mayo Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Meath"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cork Male'}), (m:County {County:'Meath Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Monaghan"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cork Male'}), (m:County {County:'Monaghan Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Cork"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cork Male'}), (m:County {County:'Cork Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "North Tipperary"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cork Male'}), (m:County {County:'North Tipperary Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Offaly"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cork Male'}), (m:County {County:'Offaly Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Roscommon"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cork Male'}), (m:County {County:'Roscommon Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Sligo"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cork Male'}), (m:County {County:'Sligo Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Cork"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cork Male'}), (m:County {County:'Cork Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "South Tipperary"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cork Male'}), (m:County {County:'South Tipperary Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Waterford"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cork Male'}), (m:County {County:'Waterford Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Westmeath"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cork Male'}), (m:County {County:'Westmeath Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Wexford"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cork Male'}), (m:County {County:'Wexford Female'})  RETURN (n.Population), (m.Population)"};				
		}else if(female === "Wicklow"){
			d3.select("svg").remove();
			query = {"query" : "MATCH (n:County {County:'Cork Male'}), (m:County {County:'Wicklow Female'})  RETURN (n.Population), (m.Population)"};				
		}
								
	}else if (male === "Dublin") {
		if(valf === "Carlow"){
			d3.select("svg").remove();
		query = {"query" : "MATCH (n:County {County:'Dublin'}) RETURN (n.Population)"};	
		}
		
								
	}else if (male === "Donegal") {
	
		d3.select("svg").remove();
		query = {"query" : "MATCH (n:County {County:'Dublin'}) RETURN (n.Population)"};	
								
	}else if (male === "Galway") {
	
		d3.select("svg").remove();
		query = {"query" : "MATCH (n:County {County:'Dublin'}) RETURN (n.Population)"};	
								
	}else if (male === "Kerry") {
	
		d3.select("svg").remove();
		query = {"query" : "MATCH (n:County {County:'Dublin'}) RETURN (n.Population)"};	
								
	}else if (male === "Kildare") {
	
		d3.select("svg").remove();
		query = {"query" : "MATCH (n:County {County:'Dublin'}) RETURN (n.Population)"};	
								
	}else if (male === "Kilkenny") {
	
		d3.select("svg").remove();
		query = {"query" : "MATCH (n:County {County:'Dublin'}) RETURN (n.Population)"};	
								
	}else if (male === "Laoise") {
	
		d3.select("svg").remove();
		query = {"query" : "MATCH (n:County {County:'Dublin'}) RETURN (n.Population)"};	
								
	}else if (male === "Leitrim") {
	
		d3.select("svg").remove();
		query = {"query" : "MATCH (n:County {County:'Dublin'}) RETURN (n.Population)"};	
								
	}else if (male === "Limerick") {
	
		d3.select("svg").remove();
		query = {"query" : "MATCH (n:County {County:'Dublin'}) RETURN (n.Population)"};	
								
	}else if (male === "Longford") {
	
		d3.select("svg").remove();
		query = {"query" : "MATCH (n:County {County:'Dublin'}) RETURN (n.Population)"};	
								
	}
	
	//Asynchronous JavaScript and XML  - Request data qithout refreshing entire page
	$.ajax({
		//POST Request
		type: "POST",
		async: false,
		//Server url
		url: "http://gmitsoftware.cloudapp.net:7474/db/data/cypher",
		//Request JSON
		dataType: "json",
		//Cypher query
		//data: {"query" : "MATCH (n:County) RETURN DISTINCT (n.Population) LIMIT 3;"},
		//data: {"query" : "MATCH (n:County {County:'Galway'}) RETURN (n.Population)"},
		data: query,
		
		//On success call callback function
		success: callback,
		
		//Error function
		error: function (jqXHR, exception) {
			var msg = '';
			if (jqXHR.status == 400) {
				msg = 'Status: 400 Bad Request';
			} else if (exception === 404) {
				msg = 'Status: 404 Not Found';
			} else if (exception === 408) {
				msg = 'Status: 408 Request Timeout';
			} else if (exception === 418) {
				//type: "BREW",
				//url: https://en.wikipedia.org/wiki/Hyper_Text_Coffee_Pot_Control_Protocol,
				//accepts: "Lyons Tea",
				//datatype: "Tealeaves",
				msg = 'Im a Teapot RFC2324';
			} else {
				msg = 'Uncaught Error.\n' + jqXHR.responseText;
			}
			//Display error in console
			console.log(msg);
		}
	});//end of ajax
	
} //end of postRequest()

postRequest();


//callback function
function callback(data){
	
	arr = $.map(data, function(el) { return el });
	var a = arr[2][0]
	var b = arr[2][1]
	
	console.log(a);
	console.log(b);
	
	//D3 color scale 10,20,20b each one contains a unique set of colors 
    var color = d3.scale.category10();
	
	//Adding an SVG element to the canvas
	svg = d3.select("body")
		.append("svg")
		//set width of canvas
		.attr("width", "960")
		//set height of canvas
		.attr("height", "400")
		//group SVG shapes together
		.append("g")
		
	//JavaScript data Object
	var data = [{
        Text: "Male",
        population: a
	
		
    }, {
        Text: "Female",
		population: b
		
    }]
      
    x = d3.scale.ordinal();

    y = d3.scale.linear();

    x.domain(data.map(function(d) {
            return d.Text;
        }))
        .rangeRoundBands([0, 920], .2);

    var pie = d3.layout.pie()
        .value(function(d) {
            return d.population;
        });
	//arc generat
    arc = d3.svg.arc();

    y.domain([0, d3.max(data.map(function(d) {
            return d.population;
        }))])
        //.range([1500 / 4 - 20, 0]);//?????
		//.range([550, 0]);
		.range([1500 / 4 - 20, 0]);

    var g = svg.selectAll(".symbol")
        .data(function() {
            return pie(data);
        })
        .enter()
        .append("g")
        .attr("class", "symbol");

     g.append("rect")
        .style("fill", function(d) {
            return color(d.data.Text);
        })
        .attr("x", function(d){
            return x(d.data.Text);
        })
        .attr("y", function(d){
            return y(d.data.population);
			console.log(y);
        })
        .attr("width", x.rangeBand())
        .attr("height", function(d) {
                //return h - y(d.data.population);
				return 400 - y(d.data.population);
            });
            
	  	g.append("path")
			.style("fill", function(d) {
				return color(d.data.Text);
				
			});
			//draw text
			g.append("text")
			.attr("transform", function(d){
				return "translate(" + (x(d.data.Text)+x.rangeBand()/3) + "," + (400+20) + ")";
			})
			.text(function(d) {
				return d.data.Text;
			});
			
			
			
			
	
}//callback

///////////////////////////////////////////////////////////////////////////////////////////////////////

/*
*This section of code below was acquired online at [https://bl.ocks.org/LiangGou/30e9af0d54e1d5287199]
*/

function Pie(){

	var g = svg.selectAll(".symbol");
	
		g.selectAll("rect").remove();

		g.selectAll("path")
			.transition()
			.duration(2000)//takes two seconds duration
			.tween("arc", animate);
			
		j=2;//set variables j = 2
		animate();//call animate function
   
}//Pie()

function Bar(){

	var g = svg.selectAll(".symbol");

		g.selectAll("rect").remove();
		
		g.selectAll("path")
			.transition()
			.duration(2000)//takes two seconds duration
			.tween("arc", animate);
			
		j=1;//set variable j = 1
		animate();//call animat function
   
}//Bar()  

function animate(d) {

	var path = d3.select(this),
		text = d3.select(this.parentNode).select("text"),
		x0 = x(d.data.Text),
		y0 = 400 - y(d.data.population); //initial height

	return function(t) {
	if(j == 1)//if true to bar else to pie
		t = 1-t;
		var r = 400 / 2 / Math.min(1, t + 1e-3),
			//a is stepping factor, starting from 1 to 0,
			//as the timer t goes.
			//A simper alternative: a = 1 - t;
			a = Math.cos(t * Math.PI / 2),
			xx = (-r + (a) * (x0 + x.rangeBand()) + (1 - a) * (920 + 400) / 2),
			yy = ((a) * 400 + (1 - a) * 400 / 2),
			f = {
				innerRadius: (r - x.rangeBand() / (2 - a)) * a,
				//innerRadius: 80,
				//pie chart: (r - x.rangeBand() / (2 - a)) * a,
				outerRadius: r,
				startAngle: a * (Math.PI / 2 - y0 / r) + (1 - a) * d.startAngle,
				endAngle: a * (Math.PI / 2) + (1 - a) * d.endAngle
			};//f


		path.attr("transform", "translate(" + xx + "," + yy + ")");
		path.attr("d", arc(f));
		text.attr("transform", "translate(" + arc.centroid(f) + ")translate(" + xx + "," + yy + ")rotate(" + ((f.startAngle + f.endAngle) / 2 + 3 * Math.PI / 2) * 180 / Math.PI + ")");
	};//return()
}//animate()		

	</script>
</body>

</html>